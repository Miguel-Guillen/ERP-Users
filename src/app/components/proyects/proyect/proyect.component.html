<div class="container-fluid bg-light">
    <div class="row">

        <div class="col-2 px-0">
            <app-sidebar></app-sidebar>
        </div>

        <div class="col-10 px-0">
            <div class="row d-flex justify-content-between px-5 my-4" 
            *ngIf="user.rol == 'administrador'; else noAdmin">

                <div class="col-12 mb-4 mt-3 d-flex">
                    <button class="btn btn-outline-primary ff" data-bs-toggle="modal"
                    data-bs-target="#exampleModal">Nuevo empleado</button>
                    <div class="col d-flex justify-content-end p-0">
                        <input type="search" class="form-control w-50" placeholder="buscar por nombre"
                        [(ngModel)]="search">
                        <button class="btn border bg-white">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
        
                <div class="col h-table">
                    <table class="table table-borderless bg-white border border-2 shadow">
                        <thead>
                            <tr class="table-success ff">
                                <th class="col-1 text-center">Nombre</th>
                                <th class="col-1 text-center">Tipo</th>
                                <th class="col-4 text-center">Descripcion</th>
                                <th class="col-2 text-center">Area</th>
                                <th class="col-1 text-center">Fecha inicio</th>
                                <th class="col-1 text-center">Fecha entrega</th>
                                <th class="col-2 text-center">Detalles</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let p of proyects | proyects: search">
                                <td class="col-1 text-center ff">{{p.name}}</td>
                                <td class="col-1 text-center ff">{{p.type}}</td>
                                <td class="col-4 text-center ff">{{p.description}}</td>
                                <td class="col-2 text-center ff">{{p.area}}</td>
                                <td class="col-1 text-center ff">{{p.dateStart}}</td>
                                <td class="col-1 text-center ff">{{p.dateEnd}}</td>
                                <td class="col-2 text-center">
                                    <button class="btn btn-outline-success me-1" (click)="searchProyect(p.id)">
                                        <i class="fas fa-user-edit"></i>
                                    </button>
                                    <button class="btn btn-outline-danger" (click)="deleteProyect(p.id)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
        
                <!-- Modal add -->
                <div class="modal fade" id="exampleModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false"
                aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header ff">
                                <h5 class="modal-title">Editar empleado</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body ff">
                                <form class="mt-1" [formGroup]="proyectForm" (ngSubmit)="newProyect(proyectForm.value)">
                                    <div class="row my-1">
                                        <div class="col-6">
                                            <label class="form-label">Nombre</label>
                                            <input type="text" class="form-control" formControlName="name">
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label">Tipo</label>
                                            <input type="text" class="form-control" formControlName="type">
                                        </div>
                                    </div>
                                    <div class="row my-1">
                                        <div class="col-6">
                                            <label class="form-label">Descripcion</label>
                                            <textarea type="text" class="form-control" formControlName="description"></textarea>
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label">Area de trabajo</label>
                                            <input type="text" class="form-control" formControlName="area">
                                        </div>
                                    </div>
                                    <div class="row my-1">
                                        <div class="col-6">
                                            <label class="form-label">Fecha Inicio</label>
                                            <input type="date" class="form-control" formControlName="dateStart">
                                        </div>
                                        <div class="col-6">
                                            <label class="form-label">Fecha Terminacion</label>
                                            <input type="date" class="form-control" formControlName="dateEnd">
                                        </div>
                                    </div>
                                    <div class="mt-3 float-right">
                                        <button type="button" class="btn btn-outline-danger me-2" data-bs-dismiss="modal">Cancel</button>
                                        <button type="button" class="btn btn-outline-primary" type="submit">Enviar</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
        
            </div>

            <div class="col px-0 mt-3">
                <app-footer></app-footer>
            </div>

        </div>

    </div>
</div>

<ng-template #noAdmin>
    <div class="vh-100 p-5">
        <h1>Error pagina no encontrada</h1>
    </div>
</ng-template>